openapi: 3.0.0
info:
  title: Todo API with Validation
  version: 1.0.0
  description: Todo List API with full validation, filters, and error handling

servers:
  - url: http://localhost:3000

paths:
  /todos:
    get:
      summary: Get all todos (supports filters)
      parameters:
        - in: query
          name: completed
          schema:
            type: boolean
        - in: query
          name: priority
          schema:
            type: string
            enum: [high, medium, low]
      responses:
        200:
          description: List of todos

    post:
      summary: Create a new todo
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TodoInput"
      responses:
        201:
          description: Todo created
        400:
          description: Validation error

  /todos/{id}:
    get:
      summary: Get todo by ID
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Todo found
        404:
          description: Todo not found

    put:
      summary: Update full todo
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TodoInput"
      responses:
        200:
          description: Todo updated
        400:
          description: Validation error
        404:
          description: Not found

    delete:
      summary: Delete todo
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Deleted
        404:
          description: Not found

  /todos/{id}/complete:
    patch:
      summary: Toggle completion status
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Toggled
        404:
          description: Not found

components:
  schemas:
    TodoInput:
      type: object
      required:
        - task
        - completed
        - priority
        - dueDate
      properties:
        task:
          type: string
          example: Buy groceries
        completed:
          type: boolean
          example: false
        priority:
          type: string
          enum: [high, medium, low]
        dueDate:
          type: string
          example: "2026-01-08"
